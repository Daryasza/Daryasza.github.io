"use strict";!function(){document.querySelector("#name").addEventListener("keydown",function(e){var t=!1;1==(t=0<=e.key||e.key<=9?!0:t)&&e.preventDefault()}),document.querySelector("#inputPhone").addEventListener("keydown",function(e){var t=!1,n=!1,a=!1,o=!1;(0<=e.key||e.key<=9)&&(t=!0),"-"==e.key&&(n=!0),"+"==e.key&&(a=!0),"ArrowRight"!=e.key&&"ArrowLeft"!=e.key&&"Backspace"!=e.key||(o=!0),t||o||n||a||e.preventDefault()});var n=document.querySelector(".inputs"),r=(document.querySelector(".section--form"),document.body),a=e("Сообщение отправлено!"),o=e("Отправить письмо не удалось, повторите запрос позже.");function e(e){var t=document.createElement("div");t.classList.add("overlay");var n=document.createElement("div");n.classList.add("modal");var a=document.createElement("div");a.classList.add("text");var o=document.createElement("a");return o.classList.add("btn"),o.classList.add("btn--color--red"),t.appendChild(n),n.appendChild(a),a.innerHTML=e,n.appendChild(o),o.href="#",o.innerHTML="закрыть",o.addEventListener("click",function(e){e.preventDefault(),r.style.overflow="scroll",r.removeChild(t)}),t.addEventListener("click",function(e){e.target===t&&o.click()}),t}n.addEventListener("submit",function(e){e.preventDefault();var t,e={name:n.elements.name,phone:n.elements.phone,comment:n.comment};!function(e){var t,n,a=!0;for(t in e)Object.hasOwnProperty.call(e,t)&&(n=e[t],((n=n).value.trim().length?(n.classList.remove("inputs__form--error"),0):(n.classList.add("inputs__form--error"),1))&&(a=!1));return a}(e)||(r.style.overflow="hidden",e={name:e.name.value,phone:e.phone.value,comment:e.comment.value,to:"my@email.com"},(t=new XMLHttpRequest).open("POST","https://webdev-api.loftschool.com/sendmail"),t.responseType="json",t.setRequestHeader("content-type","application/json"),t.send(JSON.stringify(e)),t.addEventListener("load",function(){t.response.status?(r.appendChild(a),n.reset()):r.appendChild(o)}))})}(),function(){var e=document.querySelector("#hamburger"),t=document.querySelector("#FSmenuClose"),n=document.querySelector("#FSmenu"),a=document.querySelectorAll(".menu__link");e.addEventListener("click",function(e){r(),t.addEventListener("click",function(e){e.preventDefault(),o()})}),a.forEach(function(e){e.addEventListener("click",function(e){o()})});var o=function(){n.style.display="none",document.body.style.overflow="scroll"},r=function(){n.style.display="block",document.body.style.overflow="hidden"}}(),ymaps.ready(function(){for(var e=new ymaps.Map("map",{center:[55.74882631,37.5975413],zoom:13,controls:[]}),t=[[55.75065397,37.60518435],[55.76103528,37.5788692],[55.75534929,37.61857394],[55.74416673,37.58072261]],n=new ymaps.GeoObjectCollection({},{iconLayout:"default#image",iconImageHref:"img/map/marker.svg",iconImageSize:[43,55],iconImageOffset:[-35,-52],draggable:!1,autoFitToViewport:"always"}),a=0;a<t.length;a++)n.add(new ymaps.Placemark(t[a]));e.geoObjects.add(n),1==n.getLength()?e.setCenter(n.get(0).geometry.getCoordinates()):1<n.getLength()&&e.setBounds(n.getBounds()),e.behaviors.disable("scrollZoom"),new MobileDetect(window.navigator.userAgent).mobile()&&e.behaviors.disable("drag")}),function(){var o=$(".sct-menu__block");$(document).ready(function(){for(var e=0;e<o.length;e++)!function(e){var a=o[e];a.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<o.length;t++){var n=o[t];n!==e.currentTarget&&n.closest(".sct-menu__item").classList.remove("sct-menu__item--active")}a.closest(".sct-menu__item").classList.toggle("sct-menu__item--active")})}(e)})}(),function(){var a=$(".section"),n=$(".maincontent"),t=$(".sidebar"),o=t.find(".sidebar__item");a.first().addClass("active");function r(e){var t=l(e);!1===c&&(c=!0,n.css({transform:"translateY(".concat(t,"%)")}),d(e),s(o,e,"sidebar__item--active"),s(a,e,"active"),setTimeout(function(){c=!1},1100))}function i(){var e=a.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&r(t.index())},prev:function(){n.length&&r(n.index())}}}var c=!1,l=function(e){e*=-100;return isNaN(e)?(console.error("не верное значение в countSectionPosition"),0):e},s=function(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)},d=function(e){"grey"===a.eq(e).attr("data-sidebar-color")?t.addClass("sidebar--color--grey"):t.removeClass("sidebar--color--grey")};$(window).on("wheel",function(e){var t=e.originalEvent.deltaY,e=i();0<t&&e.next(),t<0&&e.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),t="input"==t||"textarea"==t,n=i();if(!t)switch(e.keyCode){case 40:n.next();break;case 38:n.prev()}}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));r(e.index())}),new MobileDetect(window.navigator.userAgent).mobile()&&($(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("body").swipe({swipe:function(e,t){var n;"up"===t&&(n="next"),i()[n="down"===t?"prev":n]()}}))}(),$(".interactive-avatar__link").click(function(e){e.preventDefault();var n,t=$(e.currentTarget),e=t.attr("data-link"),e=(n=e,$(".review").filter(function(e,t){return $(t).attr("data-slide")===n})),t=t.closest(".interactive-avatar");e.addClass("review--active").siblings().removeClass("review--active"),t.addClass("interactive-avatar--active").siblings().removeClass("interactive-avatar--active")}),function(){for(var i=document.querySelector(".slider__list"),e=document.querySelectorAll(".arrow"),c=document.querySelectorAll(".slider__item"),t=function(e){for(var t=i.offsetWidth,n=0,a=0;a<c.length;a++){var o=c[a];o.classList.contains("slider__item--active")&&(n=a),o.classList.remove("slider__item--active")}var r=c.length;"left"===e?--n<0&&(n=r-1):r-1<(n+=1)&&(n=0),i.style.left="-".concat(t*n,"px"),c[n].classList.add("slider__item--active")},n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.preventDefault(),this.classList.contains("arrow--left")?t("left"):t("right")});$(".slider__btn").click(function(e){return e.preventDefault()})}(),$(document).ready(function(){for(var o=$(".team__name"),e=0;e<o.length;e++)!function(e){var a=o[e];a.addEventListener("click",function(e){e.preventDefault();for(var t=0;t<o.length;t++){var n=o[t];n!==e.currentTarget&&n.closest(".team__item").classList.remove("team__item--active")}a.closest(".team__item").classList.toggle("team__item--active")})}(e)}),function(){var e,t,n,a=document.getElementById("video"),o=document.querySelector(".video__play-btn"),r=document.querySelector(".video__btn-playB"),i=document.querySelector(".video__sound-btn");a.addEventListener("pause",d),a.addEventListener("play",d),a.addEventListener("click",s),r.addEventListener("click",s),o.addEventListener("click",s),(n=document.getElementById("durationLevel")).addEventListener("input",function(){a.currentTime=n.value/1e3,u()}),n.min=0,a.onloadedmetadata=function(){n.max=1e3*a.duration},n.value=0,document.getElementById("soundOff/On").addEventListener("click",function(){{var e;0===a.volume?(t.value=l,a.volume=t.value/10,i.classList.remove("video__sound-btn--active"),e=t.max/1e3,e=a.volume/e,t.style.background="linear-gradient(90deg, #E01F3D 0%, #E01F3D ".concat(e,"%, #868686 ").concat(e,"%)")):(a.volume=0,l=t.value,t.value=0,i.classList.add("video__sound-btn--active"),t.style.background="#868686")}}),(t=document.getElementById("sound-level")).addEventListener("input",function(){a.volume=t.value/10;var e=t.max/1e3,e=a.volume/e;t.style.background="linear-gradient(90deg, #E01F3D 0%, #E01F3D ".concat(e,"%, #868686 ").concat(e,"%)"),0==a.volume?i.classList.add("video__sound-btn--active"):(i.classList.remove("video__sound-btn--active"),e=t.max/1e3,e=a.volume/e,t.style.background="linear-gradient(90deg, #E01F3D 0%, #E01F3D ".concat(e,"%, #868686 ").concat(e,"%)"))}),t.min=0,t.max=10,t.value=t.max;var c=t.max/1e3,c=a.volume/c;t.style.background="linear-gradient(90deg, #E01F3D 0%, #E01F3D ".concat(c,"%, #868686 ").concat(c,"%)");var l=t.value;function s(){a.paused?(a.play(),e=setInterval(u,10)):(a.pause(),clearInterval(e))}function d(){r.classList.toggle("video__btn-playB--active"),o.classList.toggle("video__play-btn--active")}function u(){n.value=1e3*a.currentTime;var e=a.duration/100,e=a.currentTime/e;n.style.background="linear-gradient(90deg, #E01F3D 0%, #E01F3D ".concat(e,"%, #868686 ").concat(e,"%)")}a.addEventListener("ended",function(){a.currentTime=0,n.value=0,n.style.background="#868686",r.classList.remove("video__btn-playB--active"),o.classList.remove("video__play-btn--active"),a.load()})}();